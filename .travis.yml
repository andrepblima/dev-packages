sudo: required
language: python
python:
  - "3.6"
script:
  - export EPICS_BASE=/opt/epics/base
  - pip install -r requirements.txt
# install PRUserial485
  - git clone https://github.com/lnls-sirius/pru-serial485.git
  - cd pru-serial485/src
  - sed -i s/python-sirius/python/g library_build.sh
  - ./library_build.sh develop
  - cd ../../
# install siriuspy
  - cd siriuspy
  - python setup.py test

# safelist
branches:
  only:
  - master
